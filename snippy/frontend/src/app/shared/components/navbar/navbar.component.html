<nav class="navbar">
  <div class="container-fluid">

    @if (!(auth0Service.isLoading$ | async)) {
    @if (auth0Service.isAuthenticated$ | async) {
    @if (snippetStoreService.snippet() && snippetStoreService.snippet()!.isOwner) {
    <div class="d-flex align-items-center gap-3">
      <a class="navbar-brand" routerLink="/home">
        <h2>Snippy</h2>
      </a>

      <!-- Snippet editor mode - input box -->
      <mat-form-field appearance="outline">
        <input matInput [ngModel]="snippetStoreService.snippet()!.name" (ngModelChange)="onSnippetNameChange($event)"
          placeholder="Snippet name">
        <mat-icon matSuffix>mode_edit</mat-icon>
      </mat-form-field>
      <span>{{ snippetStoreService.snippet()!.displayName }}</span>

    </div>

    <div class="d-flex align-items-center gap-3 ms-auto">
      <button matButton="filled" (click)="snippetSaveUIService.saveSnippetWithUI(snippetStoreService, user)" [disabled]="!snippetStoreService.isDirty()">
        <mat-icon>save</mat-icon>
        {{ snippetStoreService.isDirty() ? 'Save Changes' : 'Saved' }}
      </button>

      <button mat-icon-button (click)="openSettings()">
        <mat-icon>settings</mat-icon>
      </button>

      <app-login></app-login>
    </div>
    } @else {
    <div class="d-flex align-items-center gap-3">
      <a class="navbar-brand">
        <h2>Snippy</h2>
      </a>

      <mat-tab-group [(selectedIndex)]="selectedPageIndex" (selectedIndexChange)="onPageTabChange($event)">
        <mat-tab label="Your Snippets">
          <!-- Content for Your Snippets tab -->
        </mat-tab>
        <mat-tab label="Public Snippets">
          <!-- Content for Public Snippets tab -->
        </mat-tab>
      </mat-tab-group>
    </div>

    <app-login class="ms-auto"></app-login>
    }
    } @else {
    <a class="navbar-brand">
      <h2>Snippy</h2>
    </a>
    <app-login class="ms-auto"></app-login>
    }
    }
  </div>
</nav>